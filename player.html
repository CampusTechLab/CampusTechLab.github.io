<script>
  const params = new URLSearchParams(window.location.search);
  const gameURL = params.get("game");

  if (gameURL) {
    // Create a fake about:blank wrapper
    const wrapper = document.createElement("iframe");
    wrapper.style.position = "absolute";
    wrapper.style.top = "0";
    wrapper.style.left = "0";
    wrapper.style.width = "100vw";
    wrapper.style.height = "100vh";
    wrapper.style.border = "none";

    // Load a blank page into the wrapper
    wrapper.src = "about:blank";

    wrapper.onload = () => {
      const innerDoc = wrapper.contentDocument || wrapper.contentWindow.document;

      // Create the actual game iframe inside the blank page
      const gameFrame = innerDoc.createElement("iframe");
      gameFrame.src = gameURL;
      gameFrame.style.position = "absolute";
      gameFrame.style.top = "0";
      gameFrame.style.left = "0";
      gameFrame.style.width = "100vw";
      gameFrame.style.height = "100vh";
      gameFrame.style.border = "none";

      innerDoc.body.style.margin = "0";
      innerDoc.body.appendChild(gameFrame);
    };

    document.getElementById("game-container").appendChild(wrapper);
  }

  // Stealth title
  document.title = "Audio Book";
</script>
